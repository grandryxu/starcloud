@layout("/common/_container.html"){
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="${ctxPath}/static/modular/longxin/css/reset.css">
    <link rel="stylesheet" href="${ctxPath}/static/modular/longxin/css/wb.css">
    <link rel="stylesheet" href="${ctxPath}/static/modular/longxin/css/zb.css">
    <script src="${ctxPath}/static/js/jquery.min.js?v=2.1.4"> </script>
        <title>招标信息详情</title>
</head>

<body>
<div class="main">
    <table width="100%">
        <tr class="cellBg">
            <td colspan="2">${tb.fileName}</td>
        </tr>
        <tr>
            <td class="col1" style="width:200px;">提交人：</td>
            <td>${tb.createUser}</td>
        </tr>
        <tr>
            <td>项目地点：</td>
            <td>${tb.projectAddress}</td>
        </tr>
        <tr>
            <td>项目类型：</td>
            
            <td>
            ${projectActivityType}
            </td>
        </tr>
        <tr>
            <td>招标类型：</td>

            <td>
                @if(tb.tenderType == null || tb.tenderType == "0"){
                <span > 邀标 </span>
                @}else if(tb.tenderType == "1" ){
                <span > 公开招标 </span>
                @}
            </td>
        </tr>
        <tr>
            <td>
                报名截止时间：
            </td>
            <td>
                 ${tb.deadline}
            </td>
        </tr>
        <tr>
            <td>
                预计开标时间：
            </td>
            <td>
                ${tb.startTime}
            </td>
        </tr>
        <tr>
            <td>
                招标内容介绍：
            </td>
            <td>
                    <span>
                        ${tb.projectName}
                    </span>
            </td>
        </tr>
        <tr>
            <td>
                招标文件简述：
            </td>
            <td>
                    <span>
                             ${tb.tenderResume}
                    </span>
            </td>
        </tr>
        <tr>
            <td>
                招标文件：
            </td>
            <td>
                <ul class="file">
                    ${fileStr}
                </ul>
            </td>
        </tr>
        
        <tr>
            <td>
                中标单位：
            </td>
            <td>
                <ul class="bidCompany">
                    ${bidCompany}
                </ul>
            </td>
        </tr>
        
        <!-- <tr>
            <td>
                中标公告：
            </td>
            <td>
                <ul class="bidCompany">
                    <button onclick='viewNotice()'>查看</button>
                    <input id='tenderId' value='${tb.id}' style='display:none'/>
                </ul>
            </td>
        </tr> -->

    </table>
    @if(ibSize > 0){
    <div class="subTable">
        <table width="100%">
            <thead>
            <tr class="rowsBg">
                <th>参建单位</th>
                <th>投标状态</th>
                <th>评标</th>
                <th>二次评标</th>
                <th>三次评标</th>
            </tr>
            </thead>
            <tbody>
                @for(i in inviteBid){
                <tr>

                    <td>${i.companyName}

                    </td>
                    <td>
                        <span>
                            @if(isFix){
                                招标完成
                            @}else if(tb.tenderManStatus == '1'){
                                 废标
                            @}else if(tb.tenderManStatus == '2'){
                                 流标
                            @}else if(tb.status=="1" && isBid){
                                 开标中
                            @}else{
                                 未开标
                            @}

                            @if(i.status != '' && i.status != '1'){
                                @if(isBid){
                                    <button type="button" class="btn btn-outline btn-success" onclick="priceDetail(${i.id},${i.tenderId})">详细报价</button>
                                @} else {
                                    @if(shiro.hasPermission("/price/detail")){
                                        <button type="button" class="btn btn-outline btn-success" onclick="priceDetail(${i.id},${i.tenderId})">详细报价</button>
                                    @}
                                @}
                            @}
                        </span>
                    </td>



                     <td id="${i.id}1">
                         @if(isFix){
                            @if(i.pingbiao1 !=null){
                                ${i.pingbiao1}
                            @}else{
                                <button type="button" disabled="disabled"  class="btn disabled" onclick="pb1(${i.id})">评标</button>
                            @}
                         @}else if(!isBid){
                            <button type="button" disabled="disabled"  class="btn disabled" onclick="pb1(${i.id})">评标</button>
                         @}else if(tb.tenderManStatus != '0'){
                            <button type="button" disabled="disabled"  class="btn disabled" onclick="pb1(${i.id})">评标</button>
                         @}else{
                             @if(i.status=="1" ){
                                <button type="button" disabled="disabled"  class="btn disabled" onclick="pb1(${i.id})">评标</button>
                             @}else{
                                @if(i.pingbiao1 !=null ) {
                                     ${i.pingbiao1}
                                @} else{
                                    <button type="button"   class="btn btn-outline btn-success" onclick="pb1(${i.id})">评标</button>
                                @}
                             @}
                        @}
                    </td>
                    <td id="${i.id}2">
                        @if(isFix){
                            @if(i.pingbiao2 !=null){
                                ${i.pingbiao2}
                            @}else{
                                <button type="button" disabled="disabled"  class="btn disabled" onclick="pb2(${i.id})">评标</button>
                            @}
                        @}else if(!isBid){
                            <button type="button" id="${i.id}bt2" disabled="disabled" class="btn disabled" onclick="pb2(${i.id})">评标</button>
                        @}else if(tb.tenderManStatus != '0'){
                            <button type="button" id="${i.id}bt2" disabled="disabled" class="btn disabled" onclick="pb2(${i.id})">评标</button>
                        @}else{
                            @if(i.pingbiao2 !=null ) {
                                ${i.pingbiao2}
                            @} else{
                                @if(i.pingbiao1 !=null){
                                   <button type="button"  id="${i.id}bt2" class="btn btn-outline btn-success" onclick="pb2(${i.id})">评标</button>
                                @}else{
                                    <button type="button" id="${i.id}bt2" disabled="disabled" class="btn disabled" onclick="pb2(${i.id})">评标</button>
                                @}
                            @}
                        @}
                    </td>
                    <td id="${i.id}3">
                        @if(isFix){
                            @if(i.pingbiao3 !=null){
                                ${i.pingbiao3}
                            @}else{
                                <button type="button" disabled="disabled"  class="btn disabled" onclick="pb3(${i.id})">评标</button>
                            @}
                        @}else if(!isBid){
                            <button type="button" id="${i.id}bt3"  disabled="disabled" class="btn disabled" onclick="pb3(${i.id})">评标</button>
                        @}else if(tb.tenderManStatus != '0'){
                            <button type="button" id="${i.id}bt3"  disabled="disabled" class="btn disabled" onclick="pb3(${i.id})">评标</button>
                        @}else{
                            @if(i.pingbiao3 !=null ) {
                                ${i.pingbiao3}
                            @} else{
                                @ if(i.pingbiao1 !=null && i.pingbiao2!=null){
                                    <button type="button" id="${i.id}bt3"class="btn btn-outline btn-success" onclick="pb3(${i.id})">评标</button>
                                @}else{
                                    <button type="button" id="${i.id}bt3"  disabled="disabled" class="btn disabled" onclick="pb3(${i.id})">评标</button>
                                @}
                            @}
                        @}
                    </td>

                </tr>
                @}
            </tbody>
        </table>
        <button type="button" class="btn btn-outline btn-success" onclick="priceCompare(${tb.id})" style="float: right; margin: 20px;">报价对比</button>
        <button type="button" class="btn btn-outline btn-success" onclick="download(${tb.id})" style="float: right; margin: 20px;">导出</button>
    </div>
    @}
</div>
</body>
<script type="text/javascript">

    var TenderDetail = {
        id: "TenderDetail",	//表格id
        seItem: null,		//选中的条目
        table: null,
        layerIndex: -1,
    };
    function  pb1(id){
        var index = layer.open({
            type: 2,
            title: '新增评标信息',
            area: ['600px', '400px'], //宽高
            fix: false, //不固定
            maxmin: true,
            skin: 'layer-no-title',
            content: Feng.ctxPath + '/lx/tendering/pingbiao?id=' + id +"&flag=1"
        });
        this.layerIndex = index;

    }
    function  pb2(id){
        var index = layer.open({
            type: 2,
            title: '新增评标信息',
            area: ['600px', '400px'], //宽高
            fix: false, //不固定
            maxmin: true,
            skin: 'layer-no-title',
            content: Feng.ctxPath + '/lx/tendering/pingbiao?id=' + id +"&flag=2"
        });
        this.layerIndex = index;

    }
    function  pb3(id){
        var index = layer.open({
            type: 2,
            title: '新增评标信息',
            area: ['600px', '400px'], //宽高
            fix: false, //不固定
            maxmin: true,
            skin: 'layer-no-title',
            content: Feng.ctxPath + '/lx/tendering/pingbiao?id=' + id +"&flag=3"
        });
        this.layerIndex = index;

    }

    function  priceDetail(e,a){

        var index = layer.open({
            type: 2,
            title: true?'查看竞标价格':'添加竞标价格',
            area: ['40%', '40%'], //宽高
            fix: false, //不固定
            maxmin: false,
            content: Feng.ctxPath + '/lxInviteBid/price_add_view?bidId=' + e +'&tenderId=' + a + '&flag=' + true
            // content: Feng.ctxPath + '/subContractor/getAllSubContractor'
        });
        this.layerIndex = index;


    }

    function  priceCompare(a){
        var index = layer.open({
            type: 2,
            title: '竞标价格对比',
            area: ['80%', '80%'], //宽高
            fix: false, //不固定
            maxmin: false,
            content: Feng.ctxPath + '/lxInviteBid/priceCompare?tenderId=' + a
        });
        this.layerIndex = index;
    }
    
    
    function  viewNotice(){
		var tenderId = $('#tenderId').val();
        var index = layer.open({
            type: 2,
            title: '招标项目中标公告',
            area: ['80%', '80%'], //宽高
            fix: false, //不固定
            maxmin: false,
            content: Feng.ctxPath + '/lx/tendering/viewNotice?id=' + tenderId
        });
        this.layerIndex = index;


    }


    function download(a) {
        window.location.href = Feng.ctxPath + "/lxInviteBid/priceCompare/download?tenderId=" + a;
    }
</script>

</html>
@}
